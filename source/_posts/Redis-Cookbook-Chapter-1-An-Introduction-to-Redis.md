title: Redis Cookbook - Chapter 1. An Introduction to Redis
date: 2015-09-07 00:11:04
tags:
---

### 何时使用Redis?

### 情景:  
  几乎每个应用都需要存储数据，并且经常会数据变动很快。 至今，仍然有许多应用采用RDBMS(关系型数据库管理系统) 如：Oracle, MySQL, or PostgreSQL。然而随着一种新存储模式得出现，从而可以把无模式的数据存入更有效的NoSQL中，选择是否使用SQL数据库或者NoSQL经常是设计一个成功应用中的第一步。

### 解决方案:  
  考虑是否选用SQL还是NoSQL来存储数据的关键2个点是：性质和使用模式。一些数据适合用关系型存储引擎，一些数据则适合独立于性质的NoSQL引擎，像`Redis`，或者别的代替品。  如果你不需要依赖于特有的RDBMS的特性并且需要高性能和健壮性的非关系型数据库，那么NoSQL可能是最理想的选择。因此决定是否用RDBMS还是NoSQL存储引擎，你需要看看一些特定的东西，它们可以帮助你做决定。另外要记住，通常两者一起使用是必要的。  
  当工作在Web上时，你的数据和数据模型经常随着功能和业务的更新变化。改进数据库设计在关系型数据库中支撑起这些改变是相当痛苦的过程，特别是你不能承担起宕机的时候，人们通常无法忍受宕机，因为应用被期望每周24小时都在运行。在最近的一次Mongodb的演讲中，`Jeremy Zawodny`在他的[craigslist](http://blog.zawodny.com/category/craigslist/)中提到他们是如何用了两个月的时间改造了他们的档案服务的数据库设计
  是一些特别适合非关系型存储的数据案例，事务细节，历史数据，服务日志。它们通常是高度动态的，经常改动并且他们的存储往往增长迅速，需要不断的调整`schema`来存储他们，通常他们也不会感到`关系型`，其中的数据也不倾向于和其他类型数据建立关系，这是一个好的迹象表明他们可以用比RDBMS好的其他类型数据库。
  另一种用于衡量是否用NoSQL的办法就是你自己是否找到不寻常的数据由于性能原因，不再从关系型系统中收益，例如一致性和冗余性检查。  
  需要记住的事，使用NoSQL数据库的时，通常不会提供ACID(原子性，一致性，分离线，持久性)，或者仅仅提供一部分。这需要他们做一些决策否则不可能。  
  `Redis`提供了部分ACID的支持，它是设计基于单线程实现的(保证 一致性 分离性)，并且如果配置总是`appendfsync`会完整的支持，提供持久化。  
  性能也会成为一个关键因素。NoSQL数据库通常比较快，特有的如写入操作，让他们成为应用的优势是写入重。  
  以上说明，尽管NoSQL看起来更灵感，也还有强大的参数为存储关系型数据在RDBMS，如果你有可预测的数据，是一个正常的结构，你可以获得使用关系型数据库的好处。在做之前一定要先关注数据再去做决定。

### 不要相信炒作
  NoSQL数据库，例如 Redis 上手快，简单，适用于许多现代问题。但是相比下之下，选择一件正确的工具工作总是很重要的。发挥你工具的优势可以通过观察你的存储,多久你会访问它,以及数据(及其模式)如何随时间变化。
  一旦你衡量过所有的选项，选择SQL(稳定的、可预测的关系数据)还是NoSQL(临时、高度动态数据)应该是一个简单的任务。提前做这种想法会节省很多麻烦在未来数据迁移工作。  
  在NoSQL数据库之间也有许多大不同地方，如你需要账号。MongoDB是一个功能重的文档型数据库，允许你执行区间查询，正则表达式搜索，索引，MapReduce。你需要衡量所有的因素，当你选择作为你的数据库时。就和之前说的一样，问题归结为你的数据是什么和你锁需要的模式是什么。  
  例如，Redis是一个极快的，完美的适合构建写操作频繁的应用，数据长发生变化，数据适合Redis的数据结构(例如，分析数据)。一个场景，你可能不能使用Redis如果你有一个非常大的数据集，只有一小部分是“热数据”(经常被访问)或数据集情况下你不适合在内存中。
